!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a),a.register("jIoUn",(function(e,t){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(!("string"==typeof e||e instanceof String)){var t=n(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}},e.exports=e.exports.default,e.exports.default=e.exports.default})),a.register("3L395",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)void 0===e[n]&&(e[n]=t[n]);return e},e.exports=e.exports.default,e.exports.default=e.exports.default})),a.register("lum4c",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){var n,a;(0,r.default)(e),"object"===o(t)?(n=t.min||0,a=t.max):(n=arguments[1],a=arguments[2]);var i=encodeURI(e).split(/%..|./).length-1;return i>=n&&(void 0===a||i<=a)};var n,r=(n=a("jIoUn"))&&n.__esModule?n:{default:n};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}e.exports=e.exports.default,e.exports.default=e.exports.default})),a.register("g8R7G",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){(0,n.default)(e),(t=(0,r.default)(t,i)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1));!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var a=e.split("."),o=a[a.length-1];if(t.require_tld){if(a.length<2)return!1;if(!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(o))return!1;if(/\s/.test(o))return!1}return!(!t.allow_numeric_tld&&/^\d+$/.test(o))&&a.every((function(e){return!(e.length>63)&&(!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)&&(!/[\uff01-\uff5e]/.test(e)&&(!/^-|-$/.test(e)&&!(!t.allow_underscores&&/_/.test(e)))))}))};var n=o(a("jIoUn")),r=o(a("3L395"));function o(e){return e&&e.__esModule?e:{default:e}}var i={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1};e.exports=e.exports.default,e.exports.default=e.exports.default})),a.register("h8Ila",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,r.default)(t),!(n=String(n)))return e(t,4)||e(t,6);if("4"===n){if(!s.test(t))return!1;var a=t.split(".").sort((function(e,t){return e-t}));return a[3]<=255}return"6"===n&&!!c.test(t)};var n,r=(n=a("jIoUn"))&&n.__esModule?n:{default:n};var o="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(o,"[.]){3}").concat(o),s=new RegExp("^".concat(i,"$")),u="(?:[0-9a-fA-F]{1,4})",c=new RegExp("^("+"(?:".concat(u,":){7}(?:").concat(u,"|:)|")+"(?:".concat(u,":){6}(?:").concat(i,"|:").concat(u,"|:)|")+"(?:".concat(u,":){5}(?::").concat(i,"|(:").concat(u,"){1,2}|:)|")+"(?:".concat(u,":){4}(?:(:").concat(u,"){0,1}:").concat(i,"|(:").concat(u,"){1,3}|:)|")+"(?:".concat(u,":){3}(?:(:").concat(u,"){0,2}:").concat(i,"|(:").concat(u,"){1,4}|:)|")+"(?:".concat(u,":){2}(?:(:").concat(u,"){0,3}:").concat(i,"|(:").concat(u,"){1,5}|:)|")+"(?:".concat(u,":){1}(?:(:").concat(u,"){0,4}:").concat(i,"|(:").concat(u,"){1,6}|:)|")+"(?::((?::".concat(u,"){0,5}:").concat(i,"|(?::").concat(u,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=e.exports.default,e.exports.default=e.exports.default}));var o=a("bpxeT"),i=a("8nrFW"),s=a("2TvXO"),u=a("bfaTO"),c=a("twtVq"),d=a("eBfQW"),l=a("kvC6y"),f=a("QXG35"),p={};Object.defineProperty(p,"__esModule",{value:!0}),p.default=function(e,t){if((0,m.default)(e),(t=(0,g.default)(t,b)).require_display_name||t.allow_display_name){var n=e.match(_);if(n){var r=n[1];if(e=e.replace(r,"").replace(/(^<|>$)/g,""),r.endsWith(" ")&&(r=r.substr(0,r.length-1)),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;if(/[\.";<>]/.test(t)){if(t===e)return!1;if(!(t.split('"').length===t.split('\\"').length))return!1}return!0}(r))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>254)return!1;var a=e.split("@"),o=a.pop(),i=o.toLowerCase();if(t.host_blacklist.includes(i))return!1;var s=a.join("@");if(t.domain_specific_validation&&("gmail.com"===i||"googlemail.com"===i)){var u=(s=s.toLowerCase()).split("+")[0];if(!(0,v.default)(u.replace(/\./g,""),{min:6,max:30}))return!1;for(var c=u.split("."),d=0;d<c.length;d++)if(!k.test(c[d]))return!1}if(!(!1!==t.ignore_max_length||(0,v.default)(s,{max:64})&&(0,v.default)(o,{max:254})))return!1;if(!(0,x.default)(o,{require_tld:t.require_tld})){if(!t.allow_ip_domain)return!1;if(!(0,h.default)(o)){if(!o.startsWith("[")||!o.endsWith("]"))return!1;var l=o.substr(1,o.length-2);if(0===l.length||!(0,h.default)(l))return!1}}if('"'===s[0])return s=s.slice(1,s.length-1),t.allow_utf8_local_part?L.test(s):E.test(s);for(var f=t.allow_utf8_local_part?F:w,p=s.split("."),y=0;y<p.length;y++)if(!f.test(p[y]))return!1;if(t.blacklisted_chars&&-1!==s.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g")))return!1;return!0};var m=y(a("jIoUn")),g=y(a("3L395")),v=y(a("lum4c")),x=y(a("g8R7G")),h=y(a("h8Ila"));function y(e){return e&&e.__esModule?e:{default:e}}var b={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[]},_=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,w=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,k=/^[a-z\d]+$/,E=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,F=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,L=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;(p=p.default).default=p.default;var q,S=a("4s6iC"),j=a("6Urw1"),M=a("3SEMc"),B=a("6Nu6u"),C=(0,j.initializeApp)({apiKey:"AIzaSyC4TFBFQRWUVazSJUXo0Z29XqKQGw3CwAA",authDomain:"filmoteka-29d04.firebaseapp.com",projectId:"filmoteka-29d04",storageBucket:"filmoteka-29d04.appspot.com",messagingSenderId:"839332022784",appId:"1:839332022784:web:20cca0e4887dab354326e5",measurementId:"G-8B53C0FEKF",databaseURL:"https://filmoteka-29d04-default-rtdb.europe-west1.firebasedatabase.app"}),U=(0,M.getAuth)(C),A=(0,B.getDatabase)(C),D={form:document.querySelector("form.header__form"),gallery:document.querySelector(".movies-gallery"),loadMoreBtn:document.querySelector(".js-load-more-btn"),backdrop:document.querySelector(".backdrop"),modal:document.querySelector(".js-modal"),modalCloseBtn:document.querySelector("button.js-modal-close"),watchedBtn:document.querySelector(".js-watched-btn"),queueBtn:document.querySelector(".js-queue-btn"),loginBtn:document.querySelector(".js-login-btn"),logoutBtn:document.querySelector(".js-logout-btn"),loginModal:document.querySelector(".js-login-modal"),loginModalCloseBtn:document.querySelector(".js-login-close"),loginForm:document.querySelector(".js-login-form"),libraryLink:document.querySelector(".js-library-item")},T=[],I=1,$="",O=0,W=0,N=!1,R=new(0,l.Loader),K=function(){D.loadMoreBtn.classList.add("hidden")},P=function(e){e.target.classList.contains("backdrop")&&(Y(),Q())},z=function(e){"Escape"===e.code&&(Y(),Q())},Y=function(){D.backdrop.classList.add("is-hidden"),setTimeout((function(){D.modal.classList.add("is-hidden")}),200),D.backdrop.removeEventListener("click",P),document.body.removeEventListener("keydown",z)},Q=function(e){D.backdrop.classList.add("is-hidden"),setTimeout((function(){D.loginModal.classList.add("is-hidden")}),200),D.backdrop.removeEventListener("click",P),document.body.removeEventListener("keydown",z)},G=function(){I=1,$="",O=0,W=0,T=[],D.loadMoreBtn.classList.remove("hidden")},X=(q=e(o)(e(s).mark((function t(){var n,r;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R.show(),t.next=3,fetch("".concat(S.BASE_URL,"/trending/movie/day?api_key=").concat(S.API_KEY,"&page=").concat(I));case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,O+=r.results.length,W=r.total_results,O===W&&K(),T=e(i)(T).concat(e(i)(r.results)),R.hide();case 12:case"end":return t.stop()}}),t)}))),function(){return q.apply(this,arguments)}),H=function(){var t=e(o)(e(s).mark((function t(){var n,r;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R.show(),t.next=3,fetch("".concat(S.BASE_URL,"/search/movie?api_key=").concat(S.API_KEY,"&query=").concat($,"&page=").concat(I));case 3:return n=t.sent,t.next=6,n.json();case 6:r=t.sent,O+=r.results.length,W=r.total_results,O===W&&K(),T=e(i)(T).concat(e(i)(r.results)),R.hide();case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),V=function(){var e=(0,u.getMoviesMarkup)(T);D.gallery.innerHTML=e},Z=function(){var t=e(o)(e(s).mark((function t(n){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),G(),N=!0,!($=n.currentTarget.elements.query.value)){e.next=7;break}return e.next=7,J();case 7:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=e(o)(e(s).mark((function t(){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=6;break}return e.next=3,H();case 3:I+=1,e.next=9;break;case 6:return I+=1,e.next=9,X();case 9:V();case 10:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ee=function(){var t=e(o)(e(s).mark((function t(n){var r,a,o,i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.currentTarget.closest(".js-modal").dataset.id,a=T.find((function(e){return e.id===Number(r)})),R.show(),e.next=5,(0,d.readMovies)({database:A,key:S.WATCHED_KEY,uid:U.currentUser.uid});case 5:return o=e.sent,e.next=8,(0,d.readMovies)({database:A,key:S.QUEUE_KEY,uid:U.currentUser.uid});case 8:if(i=e.sent,!(null==o?void 0:o.find((function(e){return e.id===Number(r)})))&&!(null==i?void 0:i.find((function(e){return e.id===Number(r)})))){e.next=14;break}return(0,f.showMessage)({type:"failure",message:"'".concat(a.title,"' has already been added to Library")}),R.hide(),Y(),e.abrupt("return");case 14:return e.next=16,(0,d.createMovies)({database:A,key:S.WATCHED_KEY,uid:U.currentUser.uid,data:[a]});case 16:R.hide(),(0,f.showMessage)({type:"success",message:"'".concat(a.title,"' is added to 'Watched'")}),Y();case 19:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),te=function(){var t=e(o)(e(s).mark((function t(n){var r,a,o,i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.currentTarget.closest(".js-modal").dataset.id,a=T.find((function(e){return e.id===Number(r)})),R.show(),e.next=5,(0,d.readMovies)({database:A,key:S.WATCHED_KEY,uid:U.currentUser.uid});case 5:return o=e.sent,e.next=8,(0,d.readMovies)({database:A,key:S.QUEUE_KEY,uid:U.currentUser.uid});case 8:if(i=e.sent,!(null==o?void 0:o.find((function(e){return e.id===Number(r)})))&&!(null==i?void 0:i.find((function(e){return e.id===Number(r)})))){e.next=14;break}return(0,f.showMessage)({type:"failure",message:"'".concat(a.title,"' has already been added to Library")}),R.hide(),Y(),e.abrupt("return");case 14:return e.next=16,(0,d.createMovies)({database:A,key:S.QUEUE_KEY,uid:U.currentUser.uid,data:[a]});case 16:R.hide(),(0,f.showMessage)({type:"success",message:"'".concat(a.title,"' is added to 'Queue'")}),Y();case 19:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ne=function(){var t=e(o)(e(s).mark((function t(n){var r,a,o,i;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=n.currentTarget.elements,a=r.email,o=r.password,i=r.method,e(p)(a.value)){t.next=5;break}return(0,f.showMessage)({type:"failure",message:"You have to enter a valid email address"}),t.abrupt("return");case 5:if("sign-up"!==i.value){t.next=10;break}return t.next=8,(0,M.createUserWithEmailAndPassword)(U,a.value,o.value).then((function(){Q(),n.target.reset()})).catch((function(e){"auth/email-already-in-use"===e.code&&(0,f.showMessage)({type:"failure",message:"This email is already in use"})}));case 8:t.next=13;break;case 10:if("sign-in"!==i.value){t.next=13;break}return t.next=13,(0,M.signInWithEmailAndPassword)(U,a.value,o.value).then((function(){Q(),n.target.reset()})).catch((function(e){"auth/too-many-requests"===e.code&&(0,f.showMessage)({type:"failure",message:"Too many requests"}),"auth/wrong-password"===e.code&&(0,f.showMessage)({type:"failure",message:"Wrong password"})}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();(0,M.onAuthStateChanged)(U,(function(e){e?(D.loginBtn.classList.add("is-hidden"),D.logoutBtn.classList.remove("is-hidden"),D.queueBtn.classList.remove("is-hidden"),D.watchedBtn.classList.remove("is-hidden")):(D.logoutBtn.classList.add("is-hidden"),D.loginBtn.classList.remove("is-hidden"),D.queueBtn.classList.add("is-hidden"),D.watchedBtn.classList.add("is-hidden"))})),D.form.addEventListener("submit",Z),D.loadMoreBtn.addEventListener("click",J),D.gallery.addEventListener("click",(function(e){var t,n,r,a,o,i,s,u,d,l,f,p=e.target.closest("li").dataset.id;t=p,n=T.find((function(e){return e.id===Number(t)})),r=n.poster_path,a=n.title,o=n.vote_average,i=n.vote_count,s=n.popularity,u=n.original_title,d=n.genre_ids,l=n.overview,f=n.id,D.backdrop.querySelector(".js-img").src=r?"".concat(S.BASE_IMG).concat(r):"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg",D.backdrop.querySelector(".js-title").textContent=a,D.backdrop.querySelector(".js-rating").textContent=o.toFixed(2),D.backdrop.querySelector(".js-votes").textContent=i,D.backdrop.querySelector(".js-popularity").textContent=s.toFixed(2),D.backdrop.querySelector(".js-original").textContent=u,D.backdrop.querySelector(".js-genre").textContent=0!==d.length?d.map((function(e){return c.default.find((function(t){return t.id===e})).name})).join(", "):"No information",D.backdrop.querySelector(".js-text").textContent=l,D.backdrop.querySelector(".js-modal").dataset.id=f,D.modal.classList.remove("is-hidden"),D.backdrop.classList.remove("is-hidden"),D.backdrop.addEventListener("click",P),document.body.addEventListener("keydown",z)})),D.modalCloseBtn.addEventListener("click",Y),D.watchedBtn.addEventListener("click",ee),D.queueBtn.addEventListener("click",te),D.loginBtn.addEventListener("click",(function(e){D.loginModal.classList.remove("is-hidden"),D.backdrop.classList.remove("is-hidden"),D.backdrop.addEventListener("click",P),document.body.addEventListener("keydown",z)})),D.logoutBtn.addEventListener("click",(function(e){U.signOut()})),D.loginModalCloseBtn.addEventListener("click",Q),D.loginForm.addEventListener("submit",ne),X().then(V)}();
//# sourceMappingURL=index.1a4aacc9.js.map
