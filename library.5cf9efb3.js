var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},d=e.parcelRequired7c6;null==d&&((d=function(e){if(e in t)return t[e].exports;if(e in o){var d=o[e];delete o[e];var s={id:e,exports:{}};return t[e]=s,d.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},e.parcelRequired7c6=d);var s=d("3nphs"),a=d("7sOwA"),r=d("8G1wF"),n=d("ezyJp"),c=d("2PXHr");const i={watchedBtn:document.querySelector(".js-watched-btn"),queueBtn:document.querySelector(".js-queue-btn"),gallery:document.querySelector(".js-gallery"),backdrop:document.querySelector(".backdrop"),closeBtn:document.querySelector(".js-modal-close"),addToWatchedBtn:document.querySelector(".js-add-to-watched-btn"),addToQueueBtn:document.querySelector(".js-add-to-queue-btn")};let l=[],u="watched";const p=e=>{e.target.classList.contains("backdrop")&&v()},v=()=>{i.backdrop.classList.add("is-hidden"),i.backdrop.removeEventListener("click",p)},E=()=>{0===l.length&&(0,c.showMessage)({type:"info",message:"There is no movies yet"});const e=(0,a.getMoviesMarkup)(l);i.gallery.innerHTML=e},m=e=>{const{poster_path:t,title:o,vote_average:d,vote_count:s,popularity:a,original_title:c,genre_ids:p,overview:v,id:E}=l.find((({id:t})=>t===Number(e)));var m;i.backdrop.querySelector(".js-img").src=t?`${r.BASE_IMG}${t}`:"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg",i.backdrop.querySelector(".js-title").textContent=o,i.backdrop.querySelector(".js-rating").textContent=d.toFixed(2),i.backdrop.querySelector(".js-votes").textContent=s,i.backdrop.querySelector(".js-popularity").textContent=a.toFixed(2),i.backdrop.querySelector(".js-original").textContent=c,i.backdrop.querySelector(".js-genre").textContent=0!==p.length?p.map((e=>n.default.find((({id:t})=>t===e)).name)).join(", "):"No information",i.backdrop.querySelector(".js-text").textContent=v,i.backdrop.querySelector(".js-modal").dataset.id=E,"watched"===(m=u)&&(i.addToQueueBtn.textContent="add to queue",i.addToWatchedBtn.textContent="remove"),"queue"===m&&(i.addToQueueBtn.textContent="remove",i.addToWatchedBtn.textContent="add to watched")},g=e=>{i.watchedBtn.classList.add("active"),i.queueBtn.classList.remove("active"),u="watched",l=(0,s.readMovies)(r.WATCHED_KEY),E()};i.watchedBtn.addEventListener("click",g),i.queueBtn.addEventListener("click",(e=>{i.queueBtn.classList.add("active"),i.watchedBtn.classList.remove("active"),u="queue",l=(0,s.readMovies)(r.QUEUE_KEY),E()})),i.gallery.addEventListener("click",(e=>{const t=e.target.closest("li").dataset.id;m(t),i.backdrop.classList.remove("is-hidden"),i.backdrop.addEventListener("click",p)})),i.closeBtn.addEventListener("click",v),i.addToWatchedBtn.addEventListener("click",(e=>{const t=e.currentTarget.closest(".js-modal").dataset.id,o=l.find((({id:e})=>e===Number(t)));"queue"===u&&((0,s.updateMovies)(r.WATCHED_KEY,o),(0,s.deleteMovie)(r.QUEUE_KEY,t),l=(0,s.readMovies)(r.QUEUE_KEY),(0,c.showMessage)({type:"success",message:`'${o.title}' is moved to 'Watched'`})),"watched"===u&&((0,s.deleteMovie)(r.WATCHED_KEY,t),l=(0,s.readMovies)(r.WATCHED_KEY),(0,c.showMessage)({type:"success",message:`'${o.title}' is deleted`})),v(),E()})),i.addToQueueBtn.addEventListener("click",(e=>{const t=e.currentTarget.closest(".js-modal").dataset.id,o=l.find((({id:e})=>e===Number(t)));"watched"===u&&((0,s.updateMovies)(r.QUEUE_KEY,o),(0,s.deleteMovie)(r.WATCHED_KEY,t),l=(0,s.readMovies)(r.WATCHED_KEY),(0,c.showMessage)({type:"success",message:`'${o.title}' is moved to 'Queue'`})),"queue"===u&&((0,s.deleteMovie)(r.QUEUE_KEY,t),l=(0,s.readMovies)(r.QUEUE_KEY),(0,c.showMessage)({type:"success",message:`'${o.title}' is deleted`})),v(),E()})),g();
//# sourceMappingURL=library.5cf9efb3.js.map
