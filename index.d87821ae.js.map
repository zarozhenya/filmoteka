{"mappings":"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","sources":["node_modules/validator/lib/util/assertString.js","node_modules/validator/lib/util/merge.js","node_modules/validator/lib/isByteLength.js","node_modules/validator/lib/isFQDN.js","node_modules/validator/lib/isIP.js","src/index.js","node_modules/validator/lib/isEmail.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = assertString;\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction assertString(input) {\n  var isString = typeof input === 'string' || input instanceof String;\n\n  if (!isString) {\n    var invalidType = _typeof(input);\n\n    if (input === null) invalidType = 'null';else if (invalidType === 'object') invalidType = input.constructor.name;\n    throw new TypeError(\"Expected a string but received a \".concat(invalidType));\n  }\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = merge;\n\nfunction merge() {\n  var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var defaults = arguments.length > 1 ? arguments[1] : undefined;\n\n  for (var key in defaults) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = defaults[key];\n    }\n  }\n\n  return obj;\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isByteLength;\n\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-disable prefer-rest-params */\nfunction isByteLength(str, options) {\n  (0, _assertString.default)(str);\n  var min;\n  var max;\n\n  if (_typeof(options) === 'object') {\n    min = options.min || 0;\n    max = options.max;\n  } else {\n    // backwards compatibility: isByteLength(str, min [, max])\n    min = arguments[1];\n    max = arguments[2];\n  }\n\n  var len = encodeURI(str).split(/%..|./).length - 1;\n  return len >= min && (typeof max === 'undefined' || len <= max);\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isFQDN;\n\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\n\nvar _merge = _interopRequireDefault(require(\"./util/merge\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar default_fqdn_options = {\n  require_tld: true,\n  allow_underscores: false,\n  allow_trailing_dot: false,\n  allow_numeric_tld: false,\n  allow_wildcard: false\n};\n\nfunction isFQDN(str, options) {\n  (0, _assertString.default)(str);\n  options = (0, _merge.default)(options, default_fqdn_options);\n  /* Remove the optional trailing dot before checking validity */\n\n  if (options.allow_trailing_dot && str[str.length - 1] === '.') {\n    str = str.substring(0, str.length - 1);\n  }\n  /* Remove the optional wildcard before checking validity */\n\n\n  if (options.allow_wildcard === true && str.indexOf('*.') === 0) {\n    str = str.substring(2);\n  }\n\n  var parts = str.split('.');\n  var tld = parts[parts.length - 1];\n\n  if (options.require_tld) {\n    // disallow fqdns without tld\n    if (parts.length < 2) {\n      return false;\n    }\n\n    if (!/^([a-z\\u00A1-\\u00A8\\u00AA-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(tld)) {\n      return false;\n    } // disallow spaces\n\n\n    if (/\\s/.test(tld)) {\n      return false;\n    }\n  } // reject numeric TLDs\n\n\n  if (!options.allow_numeric_tld && /^\\d+$/.test(tld)) {\n    return false;\n  }\n\n  return parts.every(function (part) {\n    if (part.length > 63) {\n      return false;\n    }\n\n    if (!/^[a-z_\\u00a1-\\uffff0-9-]+$/i.test(part)) {\n      return false;\n    } // disallow full-width chars\n\n\n    if (/[\\uff01-\\uff5e]/.test(part)) {\n      return false;\n    } // disallow parts starting or ending with hyphen\n\n\n    if (/^-|-$/.test(part)) {\n      return false;\n    }\n\n    if (!options.allow_underscores && /_/.test(part)) {\n      return false;\n    }\n\n    return true;\n  });\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isIP;\n\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n11.3.  Examples\n\n   The following addresses\n\n             fe80::1234 (on the 1st link of the node)\n             ff02::5678 (on the 5th link of the node)\n             ff08::9abc (on the 10th organization of the node)\n\n   would be represented as follows:\n\n             fe80::1234%1\n             ff02::5678%5\n             ff08::9abc%10\n\n   (Here we assume a natural translation from a zone index to the\n   <zone_id> part, where the Nth zone of any scope is translated into\n   \"N\".)\n\n   If we use interface names as <zone_id>, those addresses could also be\n   represented as follows:\n\n            fe80::1234%ne0\n            ff02::5678%pvc1.3\n            ff08::9abc%interface10\n\n   where the interface \"ne0\" belongs to the 1st link, \"pvc1.3\" belongs\n   to the 5th link, and \"interface10\" belongs to the 10th organization.\n * * */\nvar IPv4SegmentFormat = '(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])';\nvar IPv4AddressFormat = \"(\".concat(IPv4SegmentFormat, \"[.]){3}\").concat(IPv4SegmentFormat);\nvar IPv4AddressRegExp = new RegExp(\"^\".concat(IPv4AddressFormat, \"$\"));\nvar IPv6SegmentFormat = '(?:[0-9a-fA-F]{1,4})';\nvar IPv6AddressRegExp = new RegExp('^(' + \"(?:\".concat(IPv6SegmentFormat, \":){7}(?:\").concat(IPv6SegmentFormat, \"|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){6}(?:\").concat(IPv4AddressFormat, \"|:\").concat(IPv6SegmentFormat, \"|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){5}(?::\").concat(IPv4AddressFormat, \"|(:\").concat(IPv6SegmentFormat, \"){1,2}|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){4}(?:(:\").concat(IPv6SegmentFormat, \"){0,1}:\").concat(IPv4AddressFormat, \"|(:\").concat(IPv6SegmentFormat, \"){1,3}|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){3}(?:(:\").concat(IPv6SegmentFormat, \"){0,2}:\").concat(IPv4AddressFormat, \"|(:\").concat(IPv6SegmentFormat, \"){1,4}|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){2}(?:(:\").concat(IPv6SegmentFormat, \"){0,3}:\").concat(IPv4AddressFormat, \"|(:\").concat(IPv6SegmentFormat, \"){1,5}|:)|\") + \"(?:\".concat(IPv6SegmentFormat, \":){1}(?:(:\").concat(IPv6SegmentFormat, \"){0,4}:\").concat(IPv4AddressFormat, \"|(:\").concat(IPv6SegmentFormat, \"){1,6}|:)|\") + \"(?::((?::\".concat(IPv6SegmentFormat, \"){0,5}:\").concat(IPv4AddressFormat, \"|(?::\").concat(IPv6SegmentFormat, \"){1,7}|:))\") + ')(%[0-9a-zA-Z-.:]{1,})?$');\n\nfunction isIP(str) {\n  var version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  (0, _assertString.default)(str);\n  version = String(version);\n\n  if (!version) {\n    return isIP(str, 4) || isIP(str, 6);\n  }\n\n  if (version === '4') {\n    if (!IPv4AddressRegExp.test(str)) {\n      return false;\n    }\n\n    var parts = str.split('.').sort(function (a, b) {\n      return a - b;\n    });\n    return parts[3] <= 255;\n  }\n\n  if (version === '6') {\n    return !!IPv6AddressRegExp.test(str);\n  }\n\n  return false;\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;","import { getMoviesMarkup } from './js/templates';\nimport genres from './js/genres';\nimport { readMovies, createMovies } from './js/crud';\nimport { Loader } from './js/loader';\nimport { showMessage } from './js/showMessage';\nimport isEmail from 'validator/lib/isEmail';\n\nimport {\n  API_KEY,\n  BASE_URL,\n  BASE_IMG,\n  WATCHED_KEY,\n  QUEUE_KEY,\n} from './js/constants';\n\nimport { initializeApp } from 'firebase/app';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n} from 'firebase/auth';\n\nimport { getDatabase } from 'firebase/database';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyC4TFBFQRWUVazSJUXo0Z29XqKQGw3CwAA',\n  authDomain: 'filmoteka-29d04.firebaseapp.com',\n  projectId: 'filmoteka-29d04',\n  storageBucket: 'filmoteka-29d04.appspot.com',\n  messagingSenderId: '839332022784',\n  appId: '1:839332022784:web:20cca0e4887dab354326e5',\n  measurementId: 'G-8B53C0FEKF',\n  databaseURL:\n    'https://filmoteka-29d04-default-rtdb.europe-west1.firebasedatabase.app',\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst database = getDatabase(app);\n\nconst refs = {\n  form: document.querySelector('form.header__form'),\n  gallery: document.querySelector('.movies-gallery'),\n  loadMoreBtn: document.querySelector('.js-load-more-btn'),\n  backdrop: document.querySelector('.backdrop'),\n  modal: document.querySelector('.js-modal'),\n  modalCloseBtn: document.querySelector('button.js-modal-close'),\n  watchedBtn: document.querySelector('.js-watched-btn'),\n  queueBtn: document.querySelector('.js-queue-btn'),\n  loginBtn: document.querySelector('.js-login-btn'),\n  logoutBtn: document.querySelector('.js-logout-btn'),\n  loginModal: document.querySelector('.js-login-modal'),\n  loginModalCloseBtn: document.querySelector('.js-login-close'),\n  loginForm: document.querySelector('.js-login-form'),\n  libraryLink: document.querySelector('.js-library-item'),\n};\n\nlet items = [];\nlet page = 1;\nlet query = '';\nlet currentResult = 0;\nlet totalResults = 0;\nlet searchByQuery = false;\nconst loader = new Loader();\n\nconst showButton = () => {\n  refs.loadMoreBtn.classList.remove('hidden');\n};\nconst hideButton = () => {\n  refs.loadMoreBtn.classList.add('hidden');\n};\n\nconst onBackdropClick = e => {\n  if (e.target.classList.contains('backdrop')) {\n    hideModal();\n    hideLogin();\n  }\n};\n\nconst onKeyPress = e => {\n  if (e.code === 'Escape') {\n    hideModal();\n    hideLogin();\n  }\n};\n\nconst showModal = () => {\n  refs.modal.classList.remove('is-hidden');\n  refs.backdrop.classList.remove('is-hidden');\n\n  refs.backdrop.addEventListener('click', onBackdropClick);\n  document.body.addEventListener('keydown', onKeyPress);\n};\nconst hideModal = () => {\n  refs.backdrop.classList.add('is-hidden');\n  setTimeout(() => {\n    refs.modal.classList.add('is-hidden');\n  }, 200);\n  refs.backdrop.removeEventListener('click', onBackdropClick);\n  document.body.removeEventListener('keydown', onKeyPress);\n};\n\nconst showLogin = e => {\n  refs.loginModal.classList.remove('is-hidden');\n  refs.backdrop.classList.remove('is-hidden');\n  refs.backdrop.addEventListener('click', onBackdropClick);\n  document.body.addEventListener('keydown', onKeyPress);\n};\n\nconst hideLogin = e => {\n  refs.backdrop.classList.add('is-hidden');\n  setTimeout(() => {\n    refs.loginModal.classList.add('is-hidden');\n  }, 200);\n  refs.backdrop.removeEventListener('click', onBackdropClick);\n  document.body.removeEventListener('keydown', onKeyPress);\n};\n\nconst reset = () => {\n  page = 1;\n  query = '';\n  currentResult = 0;\n  totalResults = 0;\n  items = [];\n  showButton();\n};\n\nconst loadTrendingMovies = async () => {\n  loader.show();\n  const res = await fetch(\n    `${BASE_URL}/trending/movie/day?api_key=${API_KEY}&page=${page}`\n  );\n  const data = await res.json();\n  currentResult += data.results.length;\n  totalResults = data.total_results;\n  if (currentResult === totalResults) {\n    hideButton();\n  }\n  items = [...items, ...data.results];\n  loader.hide();\n};\n\nconst loadMoviesByQuery = async () => {\n  loader.show();\n  const res = await fetch(\n    `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${query}&page=${page}`\n  );\n  const data = await res.json();\n  currentResult += data.results.length;\n  totalResults = data.total_results;\n  if (currentResult === totalResults) {\n    hideButton();\n  }\n  items = [...items, ...data.results];\n  loader.hide();\n};\n\nconst renderItems = () => {\n  const markup = getMoviesMarkup(items);\n  refs.gallery.innerHTML = markup;\n};\n\nconst renderModal = idMovie => {\n  const {\n    poster_path,\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    genre_ids,\n    overview,\n    id,\n  } = items.find(({ id }) => id === Number(idMovie));\n  refs.backdrop.querySelector('.js-img').src = poster_path\n    ? `${BASE_IMG}${poster_path}`\n    : 'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg';\n  refs.backdrop.querySelector('.js-title').textContent = title;\n  refs.backdrop.querySelector('.js-rating').textContent =\n    vote_average.toFixed(2);\n  refs.backdrop.querySelector('.js-votes').textContent = vote_count;\n  refs.backdrop.querySelector('.js-popularity').textContent =\n    popularity.toFixed(2);\n  refs.backdrop.querySelector('.js-original').textContent = original_title;\n  refs.backdrop.querySelector('.js-genre').textContent =\n    genre_ids.length !== 0\n      ? genre_ids\n          .map(idGenre => genres.find(({ id }) => id === idGenre).name)\n          .join(', ')\n      : 'No information';\n  refs.backdrop.querySelector('.js-text').textContent = overview;\n  refs.backdrop.querySelector('.js-modal').dataset.id = id;\n};\n\nconst onFormSubmit = async e => {\n  e.preventDefault();\n  reset();\n  searchByQuery = true;\n  query = e.currentTarget.elements.query.value;\n  if (query) {\n    await onLoadMore();\n  }\n};\n\nconst onLoadMore = async () => {\n  if (searchByQuery) {\n    await loadMoviesByQuery();\n\n    page += 1;\n  } else {\n    page += 1;\n    await loadTrendingMovies();\n  }\n  renderItems();\n};\n\nconst onGalleryClick = e => {\n  const element = e.target;\n  const id = element.closest('li').dataset.id;\n  renderModal(id);\n  showModal();\n};\n\nconst onWatchedBtnClick = async e => {\n  const movieId = e.currentTarget.closest('.js-modal').dataset.id;\n  const movieData = items.find(({ id }) => id === Number(movieId));\n\n  loader.show();\n\n  const watchedMovies = await readMovies({\n    database,\n    key: WATCHED_KEY,\n    uid: auth.currentUser.uid,\n  });\n\n  const queueMovies = await readMovies({\n    database,\n    key: QUEUE_KEY,\n    uid: auth.currentUser.uid,\n  });\n\n  if (\n    watchedMovies?.find(({ id }) => id === Number(movieId)) ||\n    queueMovies?.find(({ id }) => id === Number(movieId))\n  ) {\n    showMessage({\n      type: 'failure',\n      message: `'${movieData.title}' has already been added to Library`,\n    });\n    loader.hide();\n    hideModal();\n    return;\n  }\n\n  await createMovies({\n    database,\n    key: WATCHED_KEY,\n    uid: auth.currentUser.uid,\n    data: [movieData],\n  });\n  loader.hide();\n  showMessage({\n    type: 'success',\n    message: `'${movieData.title}' is added to 'Watched'`,\n  });\n  hideModal();\n};\n\nconst onQueueBtnClick = async e => {\n  const movieId = e.currentTarget.closest('.js-modal').dataset.id;\n  const movieData = items.find(({ id }) => id === Number(movieId));\n\n  loader.show();\n\n  const watchedMovies = await readMovies({\n    database,\n    key: WATCHED_KEY,\n    uid: auth.currentUser.uid,\n  });\n\n  const queueMovies = await readMovies({\n    database,\n    key: QUEUE_KEY,\n    uid: auth.currentUser.uid,\n  });\n\n  if (\n    watchedMovies?.find(({ id }) => id === Number(movieId)) ||\n    queueMovies?.find(({ id }) => id === Number(movieId))\n  ) {\n    showMessage({\n      type: 'failure',\n      message: `'${movieData.title}' has already been added to Library`,\n    });\n    loader.hide();\n    hideModal();\n    return;\n  }\n\n  await createMovies({\n    database,\n    key: QUEUE_KEY,\n    uid: auth.currentUser.uid,\n    data: [movieData],\n  });\n  loader.hide();\n  showMessage({\n    type: 'success',\n    message: `'${movieData.title}' is added to 'Queue'`,\n  });\n  hideModal();\n};\n\nconst onLoginSubmit = async e => {\n  e.preventDefault();\n  const { email, password, method } = e.currentTarget.elements;\n\n  if (!isEmail(email.value)) {\n    showMessage({\n      type: 'failure',\n      message: 'You have to enter a valid email address',\n    });\n    return;\n  }\n  if (method.value === 'sign-up') {\n    await createUserWithEmailAndPassword(auth, email.value, password.value)\n      .then(() => {\n        hideLogin();\n        e.target.reset();\n      })\n      .catch(error => {\n        if (error.code === 'auth/email-already-in-use') {\n          showMessage({\n            type: 'failure',\n            message: 'This email is already in use',\n          });\n        }\n      });\n  } else if (method.value === 'sign-in') {\n    await signInWithEmailAndPassword(auth, email.value, password.value)\n      .then(() => {\n        hideLogin();\n        e.target.reset();\n      })\n      .catch(error => {\n        if (error.code === 'auth/too-many-requests') {\n          showMessage({\n            type: 'failure',\n            message: 'Too many requests',\n          });\n        }\n        if (error.code === 'auth/wrong-password') {\n          showMessage({\n            type: 'failure',\n            message: 'Wrong password',\n          });\n        }\n        if (error.code === 'auth/user-not-found') {\n          showMessage({\n            type: 'failure',\n            message: 'User not found',\n          });\n        }\n      });\n  }\n};\n\nconst onLogOut = e => {\n  auth.signOut();\n};\n\nonAuthStateChanged(auth, user => {\n  if (user) {\n    refs.loginBtn.classList.add('is-hidden');\n    refs.logoutBtn.classList.remove('is-hidden');\n    refs.queueBtn.classList.remove('is-hidden');\n    refs.watchedBtn.classList.remove('is-hidden');\n  } else {\n    refs.logoutBtn.classList.add('is-hidden');\n    refs.loginBtn.classList.remove('is-hidden');\n    refs.queueBtn.classList.add('is-hidden');\n    refs.watchedBtn.classList.add('is-hidden');\n  }\n});\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\nrefs.gallery.addEventListener('click', onGalleryClick);\nrefs.modalCloseBtn.addEventListener('click', hideModal);\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\nrefs.loginBtn.addEventListener('click', showLogin);\nrefs.logoutBtn.addEventListener('click', onLogOut);\nrefs.loginModalCloseBtn.addEventListener('click', hideLogin);\nrefs.loginForm.addEventListener('submit', onLoginSubmit);\n\nloadTrendingMovies().then(renderItems);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isEmail;\n\nvar _assertString = _interopRequireDefault(require(\"./util/assertString\"));\n\nvar _merge = _interopRequireDefault(require(\"./util/merge\"));\n\nvar _isByteLength = _interopRequireDefault(require(\"./isByteLength\"));\n\nvar _isFQDN = _interopRequireDefault(require(\"./isFQDN\"));\n\nvar _isIP = _interopRequireDefault(require(\"./isIP\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar default_email_options = {\n  allow_display_name: false,\n  require_display_name: false,\n  allow_utf8_local_part: true,\n  require_tld: true,\n  blacklisted_chars: '',\n  ignore_max_length: false,\n  host_blacklist: []\n};\n/* eslint-disable max-len */\n\n/* eslint-disable no-control-regex */\n\nvar splitNameAddress = /^([^\\x00-\\x1F\\x7F-\\x9F\\cX]+)</i;\nvar emailUserPart = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]+$/i;\nvar gmailUserPart = /^[a-z\\d]+$/;\nvar quotedEmailUser = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]))*$/i;\nvar emailUserUtf8Part = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+$/i;\nvar quotedEmailUserUtf8 = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*$/i;\nvar defaultMaxEmailLength = 254;\n/* eslint-enable max-len */\n\n/* eslint-enable no-control-regex */\n\n/**\n * Validate display name according to the RFC2822: https://tools.ietf.org/html/rfc2822#appendix-A.1.2\n * @param {String} display_name\n */\n\nfunction validateDisplayName(display_name) {\n  var display_name_without_quotes = display_name.replace(/^\"(.+)\"$/, '$1'); // display name with only spaces is not valid\n\n  if (!display_name_without_quotes.trim()) {\n    return false;\n  } // check whether display name contains illegal character\n\n\n  var contains_illegal = /[\\.\";<>]/.test(display_name_without_quotes);\n\n  if (contains_illegal) {\n    // if contains illegal characters,\n    // must to be enclosed in double-quotes, otherwise it's not a valid display name\n    if (display_name_without_quotes === display_name) {\n      return false;\n    } // the quotes in display name must start with character symbol \\\n\n\n    var all_start_with_back_slash = display_name_without_quotes.split('\"').length === display_name_without_quotes.split('\\\\\"').length;\n\n    if (!all_start_with_back_slash) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isEmail(str, options) {\n  (0, _assertString.default)(str);\n  options = (0, _merge.default)(options, default_email_options);\n\n  if (options.require_display_name || options.allow_display_name) {\n    var display_email = str.match(splitNameAddress);\n\n    if (display_email) {\n      var display_name = display_email[1]; // Remove display name and angle brackets to get email address\n      // Can be done in the regex but will introduce a ReDOS (See  #1597 for more info)\n\n      str = str.replace(display_name, '').replace(/(^<|>$)/g, ''); // sometimes need to trim the last space to get the display name\n      // because there may be a space between display name and email address\n      // eg. myname <address@gmail.com>\n      // the display name is `myname` instead of `myname `, so need to trim the last space\n\n      if (display_name.endsWith(' ')) {\n        display_name = display_name.substr(0, display_name.length - 1);\n      }\n\n      if (!validateDisplayName(display_name)) {\n        return false;\n      }\n    } else if (options.require_display_name) {\n      return false;\n    }\n  }\n\n  if (!options.ignore_max_length && str.length > defaultMaxEmailLength) {\n    return false;\n  }\n\n  var parts = str.split('@');\n  var domain = parts.pop();\n  var lower_domain = domain.toLowerCase();\n\n  if (options.host_blacklist.includes(lower_domain)) {\n    return false;\n  }\n\n  var user = parts.join('@');\n\n  if (options.domain_specific_validation && (lower_domain === 'gmail.com' || lower_domain === 'googlemail.com')) {\n    /*\n      Previously we removed dots for gmail addresses before validating.\n      This was removed because it allows `multiple..dots@gmail.com`\n      to be reported as valid, but it is not.\n      Gmail only normalizes single dots, removing them from here is pointless,\n      should be done in normalizeEmail\n    */\n    user = user.toLowerCase(); // Removing sub-address from username before gmail validation\n\n    var username = user.split('+')[0]; // Dots are not included in gmail length restriction\n\n    if (!(0, _isByteLength.default)(username.replace(/\\./g, ''), {\n      min: 6,\n      max: 30\n    })) {\n      return false;\n    }\n\n    var _user_parts = username.split('.');\n\n    for (var i = 0; i < _user_parts.length; i++) {\n      if (!gmailUserPart.test(_user_parts[i])) {\n        return false;\n      }\n    }\n  }\n\n  if (options.ignore_max_length === false && (!(0, _isByteLength.default)(user, {\n    max: 64\n  }) || !(0, _isByteLength.default)(domain, {\n    max: 254\n  }))) {\n    return false;\n  }\n\n  if (!(0, _isFQDN.default)(domain, {\n    require_tld: options.require_tld\n  })) {\n    if (!options.allow_ip_domain) {\n      return false;\n    }\n\n    if (!(0, _isIP.default)(domain)) {\n      if (!domain.startsWith('[') || !domain.endsWith(']')) {\n        return false;\n      }\n\n      var noBracketdomain = domain.substr(1, domain.length - 2);\n\n      if (noBracketdomain.length === 0 || !(0, _isIP.default)(noBracketdomain)) {\n        return false;\n      }\n    }\n  }\n\n  if (user[0] === '\"') {\n    user = user.slice(1, user.length - 1);\n    return options.allow_utf8_local_part ? quotedEmailUserUtf8.test(user) : quotedEmailUser.test(user);\n  }\n\n  var pattern = options.allow_utf8_local_part ? emailUserUtf8Part : emailUserPart;\n  var user_parts = user.split('.');\n\n  for (var _i = 0; _i < user_parts.length; _i++) {\n    if (!pattern.test(user_parts[_i])) {\n      return false;\n    }\n  }\n\n  if (options.blacklisted_chars) {\n    if (user.search(new RegExp(\"[\".concat(options.blacklisted_chars, \"]+\"), 'g')) !== -1) return false;\n  }\n\n  return true;\n}\n\nmodule.exports = exports.default;\nmodule.exports.default = exports.default;"],"names":["$e5a572ad3eecc1f1$var$_typeof","obj1","Symbol","iterator","obj","constructor","prototype","Object","defineProperty","module","exports","value","default","input","String","invalidType","name","TypeError","concat","arguments","length","undefined","defaults","key","str","options","min","max","$fa4d844a9c821b11$var$_assertString","$fa4d844a9c821b11$var$_typeof","len","encodeURI","split","parcelRequire","__esModule","$bc0699c888e9cefe$var$_assertString","$bc0699c888e9cefe$var$_merge","$bc0699c888e9cefe$var$default_fqdn_options","allow_trailing_dot","substring","allow_wildcard","indexOf","parts","tld","require_tld","test","allow_numeric_tld","every","part","allow_underscores","$bc0699c888e9cefe$var$_interopRequireDefault","$c7a59416cff55fd5$var$isIP","version","$c7a59416cff55fd5$var$_assertString","$c7a59416cff55fd5$var$IPv4AddressRegExp","sort","a","b","$c7a59416cff55fd5$var$IPv6AddressRegExp","$c7a59416cff55fd5$var$IPv4SegmentFormat","$c7a59416cff55fd5$var$IPv4AddressFormat","RegExp","$c7a59416cff55fd5$var$IPv6SegmentFormat","$bpxeT","$882a7b96189f3be3$exports","$882a7b96189f3be3$var$_assertString","$882a7b96189f3be3$var$_merge","$882a7b96189f3be3$var$default_email_options","require_display_name","allow_display_name","display_email","match","$882a7b96189f3be3$var$splitNameAddress","display_name","replace","endsWith","substr","display_name_without_quotes","trim","$882a7b96189f3be3$var$validateDisplayName","ignore_max_length","domain","pop","lower_domain","toLowerCase","host_blacklist","includes","user","join","domain_specific_validation","username","$882a7b96189f3be3$var$_isByteLength","_user_parts","i","$882a7b96189f3be3$var$gmailUserPart","$882a7b96189f3be3$var$_isFQDN","allow_ip_domain","$882a7b96189f3be3$var$_isIP","startsWith","noBracketdomain","slice","allow_utf8_local_part","$882a7b96189f3be3$var$quotedEmailUserUtf8","$882a7b96189f3be3$var$quotedEmailUser","pattern","$882a7b96189f3be3$var$emailUserUtf8Part","$882a7b96189f3be3$var$emailUserPart","user_parts","_i","blacklisted_chars","search","$882a7b96189f3be3$var$_interopRequireDefault","$b8f9b7833fa37166$var$app","$6Urw1","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","databaseURL","$b8f9b7833fa37166$var$auth","$3SEMc","getAuth","$b8f9b7833fa37166$var$database","$6Nu6u","getDatabase","$b8f9b7833fa37166$var$refs","form","document","querySelector","gallery","loadMoreBtn","backdrop","modal","modalCloseBtn","watchedBtn","queueBtn","loginBtn","logoutBtn","loginModal","loginModalCloseBtn","loginForm","libraryLink","$b8f9b7833fa37166$var$items","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$query","$b8f9b7833fa37166$var$currentResult","$b8f9b7833fa37166$var$totalResults","$b8f9b7833fa37166$var$searchByQuery","$b8f9b7833fa37166$var$loader","$kvC6y","Loader","$b8f9b7833fa37166$var$hideButton","classList","add","$b8f9b7833fa37166$var$onBackdropClick","e","target","contains","$b8f9b7833fa37166$var$hideModal","$b8f9b7833fa37166$var$hideLogin","$b8f9b7833fa37166$var$onKeyPress","code","setTimeout","removeEventListener","body","$b8f9b7833fa37166$var$reset","remove","$b8f9b7833fa37166$var$loadTrendingMovies","$parcel$interopDefault","$2TvXO","mark","_callee","res","data","show","fetch","$4s6iC","BASE_URL","API_KEY","_ctx","sent","json","results","total_results","$8nrFW","hide","$b8f9b7833fa37166$var$loadMoviesByQuery","$b8f9b7833fa37166$var$renderItems","markup","$bfaTO","getMoviesMarkup","innerHTML","$b8f9b7833fa37166$var$onFormSubmit","preventDefault","currentTarget","elements","query","$b8f9b7833fa37166$var$onLoadMore","$b8f9b7833fa37166$var$onWatchedBtnClick","movieId","movieData","watchedMovies","queueMovies","closest","dataset","id","find","param","Number","$eBfQW","readMovies","database","WATCHED_KEY","uid","currentUser","QUEUE_KEY","$QXG35","showMessage","type","message","title","createMovies","$b8f9b7833fa37166$var$onQueueBtnClick","$b8f9b7833fa37166$var$onLoginSubmit","_elements","email","password","method","createUserWithEmailAndPassword","then","reset","catch","error","signInWithEmailAndPassword","onAuthStateChanged","addEventListener","idMovie","ref","poster_path","vote_average","vote_count","popularity","original_title","genre_ids","overview","id1","src","BASE_IMG","textContent","toFixed","map","idGenre","$twtVq","signOut"],"version":3,"file":"index.d87821ae.js.map"}