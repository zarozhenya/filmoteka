{"mappings":"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","sources":["src/library.js"],"sourcesContent":["import { readMovies, deleteMovie, createMovies } from './js/crud';\nimport { getMoviesMarkup } from './js/templates';\nimport { WATCHED_KEY, QUEUE_KEY, BASE_IMG } from './js/constants';\nimport genres from './js/genres';\nimport { Loader } from './js/loader';\nimport { showMessage } from './js/showMessage';\nimport { initializeApp } from 'firebase/app';\nimport {\n  getAuth,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  onAuthStateChanged,\n} from 'firebase/auth';\n\nimport { getDatabase } from 'firebase/database';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyC4TFBFQRWUVazSJUXo0Z29XqKQGw3CwAA',\n  authDomain: 'filmoteka-29d04.firebaseapp.com',\n  projectId: 'filmoteka-29d04',\n  storageBucket: 'filmoteka-29d04.appspot.com',\n  messagingSenderId: '839332022784',\n  appId: '1:839332022784:web:20cca0e4887dab354326e5',\n  measurementId: 'G-8B53C0FEKF',\n  databaseURL:\n    'https://filmoteka-29d04-default-rtdb.europe-west1.firebasedatabase.app',\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst database = getDatabase(app);\n\nconst refs = {\n  watchedBtn: document.querySelector('.js-watched-btn'),\n  queueBtn: document.querySelector('.js-queue-btn'),\n  gallery: document.querySelector('.js-gallery'),\n  backdrop: document.querySelector('.backdrop'),\n  modal: document.querySelector('.js-modal'),\n  modalCloseBtn: document.querySelector('.js-modal-close'),\n  addToWatchedBtn: document.querySelector('.js-add-to-watched-btn'),\n  addToQueueBtn: document.querySelector('.js-add-to-queue-btn'),\n  loginBtn: document.querySelector('.js-login-btn'),\n  logoutBtn: document.querySelector('.js-logout-btn'),\n  loginModal: document.querySelector('.js-login-modal'),\n  loginModalCloseBtn: document.querySelector('.js-login-close'),\n  loginForm: document.querySelector('.js-login-form'),\n};\n\nlet items = [];\nlet currentPage;\nconst loader = new Loader();\n\nconst onBackdropClick = e => {\n  if (e.target.classList.contains('backdrop')) {\n    hideModal();\n    hideLogin();\n  }\n};\n\nconst onKeyPress = e => {\n  if (e.code === 'Escape') {\n    hideModal();\n    hideLogin();\n  }\n};\n\nconst showModal = () => {\n  refs.modal.classList.remove('is-hidden');\n  refs.backdrop.classList.remove('is-hidden');\n\n  refs.backdrop.addEventListener('click', onBackdropClick);\n  document.body.addEventListener('keydown', onKeyPress);\n};\nconst hideModal = () => {\n  refs.backdrop.classList.add('is-hidden');\n  setTimeout(() => {\n    refs.modal.classList.add('is-hidden');\n  }, 200);\n  refs.backdrop.removeEventListener('click', onBackdropClick);\n  document.body.removeEventListener('keydown', onKeyPress);\n};\n\nconst showLogin = e => {\n  refs.loginModal.classList.remove('is-hidden');\n  refs.backdrop.classList.remove('is-hidden');\n  refs.backdrop.addEventListener('click', onBackdropClick);\n  document.body.addEventListener('keydown', onKeyPress);\n};\n\nconst hideLogin = e => {\n  refs.backdrop.classList.add('is-hidden');\n  setTimeout(() => {\n    refs.loginModal.classList.add('is-hidden');\n  }, 200);\n  refs.backdrop.removeEventListener('click', onBackdropClick);\n  document.body.removeEventListener('keydown', onKeyPress);\n};\nconst changeBtnView = page => {\n  if (page === 'watched') {\n    refs.addToQueueBtn.textContent = 'add to queue';\n    refs.addToWatchedBtn.textContent = 'remove';\n  }\n  if (page === 'queue') {\n    refs.addToQueueBtn.textContent = 'remove';\n    refs.addToWatchedBtn.textContent = 'add to watched';\n  }\n};\n\nconst renderItems = () => {\n  if (items.length === 0) {\n    showMessage({ type: 'info', message: 'There is no movies yet' });\n  }\n  const markup = getMoviesMarkup(items);\n  refs.gallery.innerHTML = markup;\n};\nconst renderModal = idMovie => {\n  const {\n    poster_path,\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    genre_ids,\n    overview,\n    id,\n  } = items.find(({ id }) => id === Number(idMovie));\n  refs.backdrop.querySelector('.js-img').src = poster_path\n    ? `${BASE_IMG}${poster_path}`\n    : 'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg';\n  refs.backdrop.querySelector('.js-title').textContent = title;\n  refs.backdrop.querySelector('.js-rating').textContent =\n    vote_average.toFixed(2);\n  refs.backdrop.querySelector('.js-votes').textContent = vote_count;\n  refs.backdrop.querySelector('.js-popularity').textContent =\n    popularity.toFixed(2);\n  refs.backdrop.querySelector('.js-original').textContent = original_title;\n  refs.backdrop.querySelector('.js-genre').textContent =\n    genre_ids.length !== 0\n      ? genre_ids\n          .map(idGenre => genres.find(({ id }) => id === idGenre).name)\n          .join(', ')\n      : 'No information';\n  refs.backdrop.querySelector('.js-text').textContent = overview;\n  refs.backdrop.querySelector('.js-modal').dataset.id = id;\n  changeBtnView(currentPage);\n};\n\nconst onWatchedBtnClick = async e => {\n  refs.watchedBtn.classList.add('active');\n  refs.queueBtn.classList.remove('active');\n  if (currentPage === 'watched') {\n    return;\n  }\n  currentPage = 'watched';\n\n  loader.show();\n\n  items = await readMovies({\n    database,\n    key: WATCHED_KEY,\n    uid: auth.currentUser.uid,\n  });\n  loader.hide();\n  renderItems();\n};\nconst onQueueBtnClick = async e => {\n  refs.queueBtn.classList.add('active');\n  refs.watchedBtn.classList.remove('active');\n\n  if (currentPage === 'queue') {\n    return;\n  }\n  currentPage = 'queue';\n  loader.show();\n  items = await readMovies({\n    database,\n    key: QUEUE_KEY,\n    uid: auth?.currentUser?.uid,\n  });\n  loader.hide();\n\n  renderItems();\n};\nconst onGalleryClick = e => {\n  const element = e.target;\n  const id = element.closest('li').dataset.id;\n  renderModal(id);\n  showModal();\n};\n\nconst onAddToWatchedBtnClick = async e => {\n  const id = e.currentTarget.closest('.js-modal').dataset.id;\n  const movieData = items.find(({ id: movieId }) => movieId === Number(id));\n  loader.show();\n  if (currentPage === 'queue') {\n    await createMovies({\n      database,\n      key: WATCHED_KEY,\n      uid: auth.currentUser.uid,\n      data: [movieData],\n    });\n    await deleteMovie({\n      database,\n      key: QUEUE_KEY,\n      uid: auth.currentUser.uid,\n      idToDelete: id,\n    });\n    items = await readMovies({\n      database,\n      key: QUEUE_KEY,\n      uid: auth.currentUser.uid,\n    });\n    showMessage({\n      type: 'success',\n      message: `'${movieData.title}' is moved to 'Watched'`,\n    });\n  }\n  if (currentPage === 'watched') {\n    await deleteMovie({\n      database,\n      key: WATCHED_KEY,\n      uid: auth.currentUser.uid,\n      idToDelete: id,\n    });\n    items = await readMovies({\n      database,\n      key: WATCHED_KEY,\n      uid: auth.currentUser.uid,\n    });\n    showMessage({\n      type: 'success',\n      message: `'${movieData.title}' is deleted`,\n    });\n  }\n  loader.hide();\n  hideModal();\n\n  renderItems();\n};\n\nconst onAddToQueueBtn = async e => {\n  const id = e.currentTarget.closest('.js-modal').dataset.id;\n  const movieData = items.find(({ id: movieId }) => movieId === Number(id));\n  if (currentPage === 'watched') {\n    await createMovies({\n      database,\n      key: QUEUE_KEY,\n      uid: auth.currentUser.uid,\n      data: [movieData],\n    });\n    await deleteMovie({\n      database,\n      key: WATCHED_KEY,\n      uid: auth.currentUser.uid,\n      idToDelete: id,\n    });\n    items = await readMovies({\n      database,\n      key: WATCHED_KEY,\n      uid: auth.currentUser.uid,\n    });\n    showMessage({\n      type: 'success',\n      message: `'${movieData.title}' is moved to 'Queue'`,\n    });\n  }\n  if (currentPage === 'queue') {\n    await deleteMovie({\n      database,\n      key: QUEUE_KEY,\n      uid: auth.currentUser.uid,\n      idToDelete: id,\n    });\n    items = await readMovies({\n      database,\n      key: QUEUE_KEY,\n      uid: auth.currentUser.uid,\n    });\n    showMessage({\n      type: 'success',\n      message: `'${movieData.title}' is deleted`,\n    });\n  }\n  hideModal();\n\n  renderItems();\n};\n\nconst onLoginSubmit = async e => {\n  e.preventDefault();\n  const { email, password, method } = e.currentTarget.elements;\n  console.log(method.value);\n  if (method.value === 'sign-up') {\n    await createUserWithEmailAndPassword(\n      auth,\n      email.value,\n      password.value\n    ).catch(error => {\n      console.log(error.code);\n      console.log(error.message);\n    });\n  } else if (method.value === 'sign-in') {\n    await signInWithEmailAndPassword(auth, email.value, password.value).catch(\n      error => {\n        console.log(error.code);\n        console.log(error.message);\n      }\n    );\n  }\n  hideLogin();\n  e.target.reset();\n};\n\nconst onLogOut = e => {\n  auth.signOut();\n};\n\nonAuthStateChanged(auth, user => {\n  if (user) {\n    refs.loginBtn.classList.add('is-hidden');\n    refs.logoutBtn.classList.remove('is-hidden');\n    refs.watchedBtn.removeAttribute('disabled');\n    refs.queueBtn.removeAttribute('disabled');\n    onWatchedBtnClick();\n  } else {\n    refs.logoutBtn.classList.add('is-hidden');\n    refs.loginBtn.classList.remove('is-hidden');\n    refs.watchedBtn.setAttribute('disabled', 'true');\n    refs.queueBtn.setAttribute('disabled', 'true');\n    refs.gallery.innerHTML = '';\n    showMessage({\n      type: 'info',\n      message: 'You have to login to see movies in library',\n    });\n  }\n});\n\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\nrefs.gallery.addEventListener('click', onGalleryClick);\nrefs.modalCloseBtn.addEventListener('click', hideModal);\nrefs.addToWatchedBtn.addEventListener('click', onAddToWatchedBtnClick);\nrefs.addToQueueBtn.addEventListener('click', onAddToQueueBtn);\nrefs.loginBtn.addEventListener('click', showLogin);\nrefs.logoutBtn.addEventListener('click', onLogOut);\nrefs.loginModalCloseBtn.addEventListener('click', hideLogin);\nrefs.loginForm.addEventListener('submit', onLoginSubmit);\n"],"names":["$cecbdd76f2d3d4bd$var$currentPage","$bpxeT","parcelRequire","$cecbdd76f2d3d4bd$var$app","$6Urw1","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","databaseURL","$cecbdd76f2d3d4bd$var$auth","$3SEMc","getAuth","$cecbdd76f2d3d4bd$var$database","$6Nu6u","getDatabase","$cecbdd76f2d3d4bd$var$refs","watchedBtn","document","querySelector","queueBtn","gallery","backdrop","modal","modalCloseBtn","addToWatchedBtn","addToQueueBtn","loginBtn","logoutBtn","loginModal","loginModalCloseBtn","loginForm","$cecbdd76f2d3d4bd$var$items","$cecbdd76f2d3d4bd$var$loader","$kvC6y","Loader","$cecbdd76f2d3d4bd$var$onBackdropClick","e","target","classList","contains","$cecbdd76f2d3d4bd$var$hideModal","$cecbdd76f2d3d4bd$var$hideLogin","$cecbdd76f2d3d4bd$var$onKeyPress","code","add","setTimeout","removeEventListener","body","$cecbdd76f2d3d4bd$var$renderItems","length","$QXG35","showMessage","type","message","markup","$bfaTO","getMoviesMarkup","innerHTML","$cecbdd76f2d3d4bd$var$renderModal","idMovie","page","ref","find","param","id","Number","poster_path","title","vote_average","vote_count","popularity","original_title","genre_ids","overview","id1","src","concat","$4s6iC","BASE_IMG","textContent","toFixed","map","idGenre","$twtVq","default","name","join","dataset","$cecbdd76f2d3d4bd$var$onWatchedBtnClick","$parcel$interopDefault","$2TvXO","mark","_callee","remove","show","$eBfQW","readMovies","database","key","WATCHED_KEY","uid","currentUser","_ctx","sent","hide","$cecbdd76f2d3d4bd$var$onQueueBtnClick","QUEUE_KEY","$cecbdd76f2d3d4bd$var$onAddToWatchedBtnClick","movieData","currentTarget","closest","createMovies","data","deleteMovie","idToDelete","$cecbdd76f2d3d4bd$var$onAddToQueueBtn","$cecbdd76f2d3d4bd$var$onLoginSubmit","_elements","email","password","method","preventDefault","elements","console","log","value","createUserWithEmailAndPassword","catch","error","signInWithEmailAndPassword","reset","onAuthStateChanged","user","removeAttribute","setAttribute","addEventListener","signOut"],"version":3,"file":"library.1ba52eac.js.map"}