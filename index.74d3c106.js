var e=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];function t({title:t,id:a,poster_path:i,release_date:n,genre_ids:o}){return`\n            <li class="movies-gallery__item" data-id=${a}>\n              <img\n                src="${i?`https://image.tmdb.org/t/p/w780${i}`:"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg"}"\n                alt="${t}"\n                class="movies-gallery__img"\n              />\n              <div class="movies-gallery__text">\n                <h3 class="movies-gallery__title">${t}</h3>\n                <p class="movies-gallery__genres">${0!==o.length?o.length<=3?e.filter((({id:e})=>o.includes(e))).map((({name:e})=>e)).join(", "):[e.find((({id:e})=>e===o[0])).name,e.find((({id:e})=>e===o[1])).name,"Other"].join(", "):"No information"} | ${n?new Date(n).getFullYear():"No information"}</p>\n              </div>\n            </li>`}const a={form:document.querySelector("form.header__form"),gallery:document.querySelector(".movies-gallery"),loadMoreBtn:document.querySelector(".js-load-more-btn"),backdrop:document.querySelector(".backdrop"),modalCloseBtn:document.querySelector("button.js-modal-close")};let i=[],n=1,o="",r=0,d=0,s=!1;const l=async()=>{const e=await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=21a38995d1a0d82c48e261b573f88f7b&page=${n}`),t=await e.json();i=[...i,...t.results]},m=async()=>{const e=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=21a38995d1a0d82c48e261b573f88f7b&query=${o}&page=${n}`),t=await e.json();r+=t.results.length,d=t.total_results,r===d&&a.loadMoreBtn.classList.add("hidden"),i=[...i,...t.results]},c=()=>{const e=i.map(t).join("\n");a.gallery.innerHTML=e},p=async()=>{s?(await m(),n+=1):(n+=1,await l()),c()};a.form.addEventListener("submit",(e=>{e.preventDefault(),n=1,o="",r=0,d=0,i=[],a.loadMoreBtn.classList.remove("hidden"),s=!0,o=e.currentTarget.elements.query.value,o&&p()})),a.loadMoreBtn.addEventListener("click",p),a.gallery.addEventListener("click",(t=>{(t=>{const{poster_path:n,title:o,vote_average:r,vote_count:d,popularity:s,original_title:l,genre_ids:m,overview:c}=i.find((({id:e})=>e===Number(t)));a.backdrop.querySelector(".js-img").src=n?`https://image.tmdb.org/t/p/w780${n}`:"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg",a.backdrop.querySelector(".js-title").textContent=o,a.backdrop.querySelector(".js-rating").textContent=r.toFixed(2),a.backdrop.querySelector(".js-votes").textContent=d,a.backdrop.querySelector(".js-popularity").textContent=s.toFixed(2),a.backdrop.querySelector(".js-original").textContent=l,a.backdrop.querySelector(".js-genre").textContent=0!==m.length?m.map((t=>e.find((({id:e})=>e===t)).name)).join(", "):"No information",a.backdrop.querySelector(".js-text").textContent=c})(t.target.closest("li").dataset.id),a.backdrop.classList.remove("is-hidden")})),a.modalCloseBtn.addEventListener("click",(()=>{a.backdrop.classList.add("is-hidden")})),l().then(c);
//# sourceMappingURL=index.74d3c106.js.map
