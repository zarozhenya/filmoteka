{"mappings":"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","sources":["src/js/genres.js","src/js/templates.js","src/index.js"],"sourcesContent":["export default [\n  { id: 28, name: 'Action' },\n  { id: 12, name: 'Adventure' },\n  { id: 16, name: 'Animation' },\n  { id: 35, name: 'Comedy' },\n  { id: 80, name: 'Crime' },\n  { id: 99, name: 'Documentary' },\n  { id: 18, name: 'Drama' },\n  { id: 10751, name: 'Family' },\n  { id: 14, name: 'Fantasy' },\n  { id: 36, name: 'History' },\n  { id: 27, name: 'Horror' },\n  { id: 10402, name: 'Music' },\n  { id: 9648, name: 'Mystery' },\n  { id: 10749, name: 'Romance' },\n  { id: 878, name: 'Science Fiction' },\n  { id: 10770, name: 'TV Movie' },\n  { id: 53, name: 'Thriller' },\n  { id: 10752, name: 'War' },\n  { id: 37, name: 'Western' },\n];\n","import genres from './genres';\n\nexport function getCardMarkup({\n  title,\n  id,\n  poster_path,\n  release_date,\n  genre_ids,\n}) {\n  const BASE_URL = 'https://image.tmdb.org/t/p/w780';\n  return `\n            <li class=\"movies-gallery__item\" data-id=${id}>\n              <img\n                src=\"${\n                  poster_path\n                    ? `${BASE_URL}${poster_path}`\n                    : 'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg'\n                }\"\n                alt=\"${title}\"\n                class=\"movies-gallery__img\"\n              />\n              <div class=\"movies-gallery__text\">\n                <h3 class=\"movies-gallery__title\">${title}</h3>\n                <p class=\"movies-gallery__genres\">${\n                  genre_ids.length !== 0\n                    ? genre_ids.length <= 3\n                      ? genres\n                          .filter(({ id: genreID }) =>\n                            genre_ids.includes(genreID)\n                          )\n                          .map(({ name }) => name)\n                          .join(', ')\n                      : [\n                          genres.find(\n                            ({ id: movieID }) => movieID === genre_ids[0]\n                          ).name,\n                          genres.find(\n                            ({ id: movieID }) => movieID === genre_ids[1]\n                          ).name,\n                          'Other',\n                        ].join(', ')\n                    : 'No information'\n                } | ${\n    release_date ? new Date(release_date).getFullYear() : 'No information'\n  }</p>\n              </div>\n            </li>`;\n}\n\nexport function getModalMarkup() {\n  return `\n      <div class=\"movie-modal\">\n        <button type=\"button\" class=\"movie-modal__close js-modal-close\">\n          <svg width=\"30px\" height=\"30px\" class=\"movie-modal__icon\">\n            <use href=\"./images/icons.svg#icon-close\"></use>\n          </svg>\n        </button>\n        <img\n          src=\"https://image.tmdb.org/t/p/w780/pIkRyD18kl4FhoCNQuWxWu5cBLM.jpg\"\n          alt=\"Thor: Love and Thunder\"\n          class=\"movie-modal__img\"\n        />\n        <div class=\"movie-modal__info\">\n          <h3 class=\"movie-modal__title\">A FISTFUL OF LEAD</h3>\n          <ul class=\"movie-modal__stats\">\n            <li class=\"movie-modal__field\">\n              <p class=\"movie-modal__category\">Vote / Votes</p>\n              <p class=\"movie-modal__data\">\n                <span class=\"movie-modal__rating\">7.3</span>\n                /\n                <span class=\"movie-modal__quantity\">1260</span>\n              </p>\n            </li>\n            <li class=\"movie-modal__field\">\n              <p class=\"movie-modal__category\">Popularity</p>\n              <p class=\"movie-modal__data\">100.2</p>\n            </li>\n            <li class=\"movie-modal__field\">\n              <p class=\"movie-modal__category\">Original Title</p>\n              <p class=\"movie-modal__data\">A FISTFUL OF LEAD</p>\n            </li>\n            <li class=\"movie-modal__field\">\n              <p class=\"movie-modal__category\">Genre</p>\n              <p class=\"movie-modal__data\">Western</p>\n            </li>\n          </ul>\n          <h4 class=\"movie-modal__subtitle\">About</h4>\n          <p class=\"movie-modal__text\">\n            Four of the West’s most infamous outlaws assemble to steal a huge\n            stash of gold from the most corrupt settlement of the gold rush\n            towns. But not all goes to plan one is killed and the other three\n            escapes with bags of gold hide out in the abandoned gold mine where\n            they happen across another gang of three – who themselves were\n            planning to hit the very same bank! As tensions rise, things go from\n            bad to worse as they realise the bags of gold are filled with\n            lead... they’ve been double crossed – but by who and how?\n          </p>\n          <ul class=\"movie-modal__buttons\">\n            <li class=\"movie-modal__item\">\n              <button\n                type=\"submit\"\n                class=\"movie-modal__btn movie-modal__btn--accent\"\n              >\n                add to Watched\n              </button>\n            </li>\n            <li class=\"movie-modal__item\">\n              <button type=\"submit\" class=\"movie-modal__btn\">\n                add to queue\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>`;\n}\n","import { getCardMarkup } from './js/templates';\nimport genres from './js/genres';\nconst refs = {\n  form: document.querySelector('form.header__form'),\n  gallery: document.querySelector('.movies-gallery'),\n  loadMoreBtn: document.querySelector('.js-load-more-btn'),\n  backdrop: document.querySelector('.backdrop'),\n  modalCloseBtn: document.querySelector('button.js-modal-close'),\n};\n\nconst KEY = '21a38995d1a0d82c48e261b573f88f7b';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst BASE_IMG = 'https://image.tmdb.org/t/p/w780';\n\nlet items = [];\nlet page = 1;\nlet query = '';\nlet currentResult = 0;\nlet totalResults = 0;\nlet searchByQuery = false;\n\nconst reset = () => {\n  page = 1;\n  query = '';\n  currentResult = 0;\n  totalResults = 0;\n  items = [];\n  refs.loadMoreBtn.classList.remove('hidden');\n};\nconst hideButton = () => {\n  refs.loadMoreBtn.classList.add('hidden');\n};\n\nconst showModal = () => {\n  refs.backdrop.classList.remove('is-hidden');\n};\nconst hideModal = () => {\n  refs.backdrop.classList.add('is-hidden');\n};\nconst loadTrendingMovies = async () => {\n  const res = await fetch(\n    `${BASE_URL}/trending/movie/week?api_key=${KEY}&page=${page}`\n  );\n  const data = await res.json();\n  items = [...items, ...data.results];\n};\n\nconst loadMoviesByQuery = async () => {\n  const res = await fetch(\n    `${BASE_URL}/search/movie?api_key=${KEY}&query=${query}&page=${page}`\n  );\n  const data = await res.json();\n  currentResult += data.results.length;\n  totalResults = data.total_results;\n  if (currentResult === totalResults) {\n    hideButton();\n  }\n  items = [...items, ...data.results];\n};\n\nconst renderItems = () => {\n  const markup = items.map(getCardMarkup).join('\\n');\n  refs.gallery.innerHTML = markup;\n};\n\nconst renderModal = idMovie => {\n  const {\n    poster_path,\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    genre_ids,\n    overview,\n  } = items.find(({ id }) => id === Number(idMovie));\n  refs.backdrop.querySelector('.js-img').src = poster_path\n    ? `${BASE_IMG}${poster_path}`\n    : 'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg';\n  refs.backdrop.querySelector('.js-title').textContent = title;\n  refs.backdrop.querySelector('.js-rating').textContent =\n    vote_average.toFixed(2);\n  refs.backdrop.querySelector('.js-votes').textContent = vote_count;\n  refs.backdrop.querySelector('.js-popularity').textContent =\n    popularity.toFixed(2);\n  refs.backdrop.querySelector('.js-original').textContent = original_title;\n  refs.backdrop.querySelector('.js-genre').textContent =\n    genre_ids.length !== 0\n      ? genre_ids\n          .map(idGenre => genres.find(({ id }) => id === idGenre).name)\n          .join(', ')\n      : 'No information';\n  refs.backdrop.querySelector('.js-text').textContent = overview;\n};\n\nconst onFormSubmit = e => {\n  e.preventDefault();\n  reset();\n  searchByQuery = true;\n  query = e.currentTarget.elements.query.value;\n  if (query) {\n    onLoadMore();\n  }\n};\n\nconst onLoadMore = async () => {\n  if (searchByQuery) {\n    await loadMoviesByQuery();\n\n    page += 1;\n  } else {\n    page += 1;\n    await loadTrendingMovies();\n  }\n  renderItems();\n};\n\nconst onGalleryClick = e => {\n  const element = e.target;\n  const id = element.closest('li').dataset.id;\n  renderModal(id);\n  showModal();\n};\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\nrefs.gallery.addEventListener('click', onGalleryClick);\nrefs.modalCloseBtn.addEventListener('click', hideModal);\n\nloadTrendingMovies().then(renderItems);\n"],"names":["$a9bf4680370b89e9$export$2e2bcd8739ae039","id","name","$56f2570fb838429e$export$812bcc5efcfe205e","title","poster_path","release_date","genre_ids","length","filter","genreID","includes","map","join","find","movieID","Date","getFullYear","$1f0dc3b9307be026$var$refs","form","document","querySelector","gallery","loadMoreBtn","backdrop","modalCloseBtn","$1f0dc3b9307be026$var$items","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$query","$1f0dc3b9307be026$var$currentResult","$1f0dc3b9307be026$var$totalResults","$1f0dc3b9307be026$var$searchByQuery","$1f0dc3b9307be026$var$loadTrendingMovies","async","res","fetch","data","json","results","$1f0dc3b9307be026$var$loadMoviesByQuery","total_results","classList","add","$1f0dc3b9307be026$var$renderItems","markup","innerHTML","$1f0dc3b9307be026$var$onLoadMore","addEventListener","e","preventDefault","remove","currentTarget","elements","query","value","idMovie","vote_average","vote_count","popularity","original_title","overview","Number","src","textContent","toFixed","idGenre","$1f0dc3b9307be026$var$renderModal","target","closest","dataset","then"],"version":3,"file":"index.74d3c106.js.map"}