var e=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}];function a({title:a,id:n,poster_path:i,release_date:t,genre_ids:o}){return`\n            <li class="movies-gallery__item" data-id=${n}>\n              <img\n                src="${i?`https://image.tmdb.org/t/p/w780${i}`:"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg"}"\n                alt="${a}"\n                class="movies-gallery__img"\n              />\n              <div class="movies-gallery__text">\n                <h3 class="movies-gallery__title">${a}</h3>\n                <p class="movies-gallery__genres">${0!==o.length?o.length<=3?e.filter((({id:e})=>o.includes(e))).map((({name:e})=>e)).join(", "):[e.find((({id:e})=>e===o[0])).name,e.find((({id:e})=>e===o[1])).name,"Other"].join(", "):"No information"} | ${t?new Date(t).getFullYear():"No information"}</p>\n              </div>\n            </li>`}const n={form:document.querySelector("form.header__form"),gallery:document.querySelector(".movies-gallery"),loadMoreBtn:document.querySelector(".js-load-more-btn")};let i=[],t=1,o="",r=0,d=0,s=!1;const m=async()=>{const e=await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=21a38995d1a0d82c48e261b573f88f7b&page=${t}`),a=await e.json();console.log(a),i=[...i,...a.results]},l=async()=>{const e=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=21a38995d1a0d82c48e261b573f88f7b&query=${o}&page=${t}`),a=await e.json();r+=a.results.length,d=a.total_results,r===d&&n.loadMoreBtn.classList.add("hidden"),i=[...i,...a.results]},c=()=>{const e=i.map(a).join("\n");n.gallery.innerHTML=e},g=async()=>{s?(await l(),t+=1):(t+=1,await m()),c()};n.form.addEventListener("submit",(e=>{e.preventDefault(),t=1,o="",r=0,d=0,i=[],n.loadMoreBtn.classList.remove("hidden"),s=!0,o=e.currentTarget.elements.query.value,o&&g()})),n.loadMoreBtn.addEventListener("click",g),m().then(c);
//# sourceMappingURL=index.f6408269.js.map
