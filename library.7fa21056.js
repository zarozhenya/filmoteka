!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var d={id:e,exports:{}};return t[e]=d,n.call(d.exports,d,d.exports),d.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},e.parcelRequired7c6=n);var d=n("eBfQW"),a=n("bfaTO"),c=n("4s6iC"),r=n("twtVq"),s=n("QXG35"),i={watchedBtn:document.querySelector(".js-watched-btn"),queueBtn:document.querySelector(".js-queue-btn"),gallery:document.querySelector(".js-gallery"),backdrop:document.querySelector(".backdrop"),closeBtn:document.querySelector(".js-modal-close"),addToWatchedBtn:document.querySelector(".js-add-to-watched-btn"),addToQueueBtn:document.querySelector(".js-add-to-queue-btn")},u=[],l="watched",v=function(e){e.target.classList.contains("backdrop")&&E()},p=function(e){"Escape"===e.code&&E()},E=function(){i.backdrop.classList.add("is-hidden"),i.backdrop.removeEventListener("click",v),document.body.removeEventListener("keydown",p)},f=function(){0===u.length&&(0,s.showMessage)({type:"info",message:"There is no movies yet"});var e=(0,a.getMoviesMarkup)(u);i.gallery.innerHTML=e},m=function(e){var t,o=u.find((function(t){return t.id===Number(e)})),n=o.poster_path,d=o.title,a=o.vote_average,s=o.vote_count,v=o.popularity,p=o.original_title,E=o.genre_ids,f=o.overview,m=o.id;i.backdrop.querySelector(".js-img").src=n?"".concat(c.BASE_IMG).concat(n):"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg",i.backdrop.querySelector(".js-title").textContent=d,i.backdrop.querySelector(".js-rating").textContent=a.toFixed(2),i.backdrop.querySelector(".js-votes").textContent=s,i.backdrop.querySelector(".js-popularity").textContent=v.toFixed(2),i.backdrop.querySelector(".js-original").textContent=p,i.backdrop.querySelector(".js-genre").textContent=0!==E.length?E.map((function(e){return r.default.find((function(t){return t.id===e})).name})).join(", "):"No information",i.backdrop.querySelector(".js-text").textContent=f,i.backdrop.querySelector(".js-modal").dataset.id=m,"watched"===(t=l)&&(i.addToQueueBtn.textContent="add to queue",i.addToWatchedBtn.textContent="remove"),"queue"===t&&(i.addToQueueBtn.textContent="remove",i.addToWatchedBtn.textContent="add to watched")},g=function(e){i.watchedBtn.classList.add("active"),i.queueBtn.classList.remove("active"),l="watched",u=(0,d.readMovies)(c.WATCHED_KEY),f()};i.watchedBtn.addEventListener("click",g),i.queueBtn.addEventListener("click",(function(e){i.queueBtn.classList.add("active"),i.watchedBtn.classList.remove("active"),l="queue",u=(0,d.readMovies)(c.QUEUE_KEY),f()})),i.gallery.addEventListener("click",(function(e){var t=e.target.closest("li").dataset.id;m(t),i.backdrop.classList.remove("is-hidden"),i.backdrop.addEventListener("click",v),document.body.addEventListener("keydown",p)})),i.closeBtn.addEventListener("click",E),i.addToWatchedBtn.addEventListener("click",(function(e){var t=e.currentTarget.closest(".js-modal").dataset.id,o=u.find((function(e){return e.id===Number(t)}));"queue"===l&&((0,d.updateMovies)(c.WATCHED_KEY,o),(0,d.deleteMovie)(c.QUEUE_KEY,t),u=(0,d.readMovies)(c.QUEUE_KEY),(0,s.showMessage)({type:"success",message:"'".concat(o.title,"' is moved to 'Watched'")})),"watched"===l&&((0,d.deleteMovie)(c.WATCHED_KEY,t),u=(0,d.readMovies)(c.WATCHED_KEY),(0,s.showMessage)({type:"success",message:"'".concat(o.title,"' is deleted")})),E(),f()})),i.addToQueueBtn.addEventListener("click",(function(e){var t=e.currentTarget.closest(".js-modal").dataset.id,o=u.find((function(e){return e.id===Number(t)}));"watched"===l&&((0,d.updateMovies)(c.QUEUE_KEY,o),(0,d.deleteMovie)(c.WATCHED_KEY,t),u=(0,d.readMovies)(c.WATCHED_KEY),(0,s.showMessage)({type:"success",message:"'".concat(o.title,"' is moved to 'Queue'")})),"queue"===l&&((0,d.deleteMovie)(c.QUEUE_KEY,t),u=(0,d.readMovies)(c.QUEUE_KEY),(0,s.showMessage)({type:"success",message:"'".concat(o.title,"' is deleted")})),E(),f()})),g()}();
//# sourceMappingURL=library.7fa21056.js.map
